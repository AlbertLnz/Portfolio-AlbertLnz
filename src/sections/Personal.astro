---
import LinkedIn from '@/assets/rrss/LinkedIn.astro'
import CV from '@/assets/rrss/CV.astro'
import Gmail from '@/assets/rrss/Gmail.astro'
import GitHubScore from '@/components/GitHubScore.astro'
import Houston from '@/components/Houston.astro'
import LanguageAndThemeSelector from '@/components/LanguageAndThemeSelector.astro'
import { getLangFromUrl } from '@/i18n/utils'
import { homepagePersonalTranslations } from '@/i18n/translations'

const lang = getLangFromUrl(Astro.url)
const { magicTrickAvailable } = Astro.props

const {
  text_intro,
  title_one,
  title_two,
  title_three,
  magic_title,
  magic_note,
  apologise_one,
  apologise_two,
} = homepagePersonalTranslations(Astro.url)
---

<section
  id='personal'
  class={`
    bg-section-bg-light dark:bg-section-bg-dark
    flex flex-col border-2 border-section-primary-border-light dark:border-section-primary-border-dark
  `}
  transition:name='personal'
>
  <div
    class='flex item-center justify-between text-tertiary-light dark:text-tertiary-dark'
  >
    <h4>{text_intro}</h4>
    <LanguageAndThemeSelector path='' />
  </div>

  <div class='flex-1 mx-4 space-y-4 mt-4'>
    <p
      class='text-lg text-center md:text-left text-primary-light dark:text-primary-dark'
    >
      {title_one}
      <span class='font-bold text-xl'>{title_two}</span>{title_three}
    </p>
    <div
      class='relative flex flex-col items-center space-y-4 md:space-y-0 md:items-stretch md:flex-row h-fit gap-x-6'
    >
      <div
        class={`
          border border-section-secondary-border-light dark:border-section-secondary-border-dark
          flex h-full items-center justify-center flex-row md:flex-col p-2 rounded-[6px] space-y-0 md:space-y-4 gap-x-4 md:gap-x-0
        `}
      >
        <a href=''>
          <LinkedIn class='group size-6 hover:scale-105' />
        </a>
        <a href=''>
          <CV class='group size-6 hover:scale-105' />
        </a>
        <a href=''>
          <Gmail class='group size-6 hover:scale-105' />
        </a>
      </div>
      <div
        class={`
          border border-section-secondary-border-light dark:border-section-secondary-border-dark
          flex flex-col p-2 rounded-[6px] space-y-4 items-center md:items-stretch
        `}
      >
        <GitHubScore />
      </div>
      <div
        class={`
          border border-section-secondary-border-light dark:border-section-secondary-border-dark
          relative h-auto flex justify-center items-center rounded-[6px] w-2/3 md:w-1/4
        `}
      >
        <h3
          class={`
            text-secondary-light dark:text-tertiary-dark
            absolute z-40 self-start justify-self-start w-full p-2
            `}
        >
          {magic_title}
        </h3>
        {
          magicTrickAvailable ? (
            <a href={`/${lang}/magic`} class='py-8 md:p-0'>
              <Houston class='size-16' />
            </a>
          ) : (
            <a href={`/${lang}`} class='py-8 md:p-0'>
              <Houston class='size-16' />
            </a>
          )
        }
        <p
          class='absolute bottom-0 right-0 text-tertiary-light dark:text-tertiary-dark text-[10px] italic p-2'
        >
          {magic_note}
        </p>
      </div>

      <p
        class='absolute bottom-0 right-0 text-right font-bold text-[10px] text-red-400'
      >
        <!-- Delete relative of the superior div -->
        {apologise_one}
        <br />
        <span>{apologise_two}</span>
      </p>
    </div>
  </div>
</section>
